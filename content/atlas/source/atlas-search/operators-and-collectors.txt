.. _operators-ref:

========================
Operators and Collectors
========================

.. default-domain:: mongodb

.. facet::
   :name: genre
   :values: reference

.. meta::
   :keywords: facet collector
   :description: Learn how to perform specific types of searches on your collection and how to group your query results with the $search and $searchMeta aggregation pipeline stages.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. _fts-operators:

Operators
---------

The following table describes the operators that can be used inside of
the :pipeline:`$search` and :pipeline:`$searchMeta` aggregation pipeline
stages to customize the output of your |fts| query. Each operator
supports queries over particular |fts| :ref:`field types
<bson-data-types>`.

.. include:: /includes/search/search-operators-table.rst

.. _collectors-ref:
.. _fts-collectors:

Collectors
----------

The following table describes the collectors that can be used inside of the :pipeline:`$search`
and :pipeline:`$searchMeta` aggregation pipeline stages to return a document representing the
:ref:`metadata results <fts-metadata-results>` of your |fts| query. This results document
is typically an aggregation over the matching |fts| query results. The
table also shows the |fts| :ref:`field types <bson-data-types>` that the
collector supports.

.. include:: /includes/search/search-collectors-table.rst

Next Steps
----------

.. _fts-operators-video-section:

Learn by Watching
~~~~~~~~~~~~~~~~~

You can also watch the following videos to
learn more about |fts| operators and collectors:

.. collapsible::
   :heading: Video: Query Operators and Relevancy Controls for Precision Searches
   :sub_heading: Watch an overview of |fts| query operators and |fts| scores.
   :expanded: false

   Watch this video for an overview of searching and tracking your
   queries with |fts|. In this video, you can learn more about |fts|
   :ref:`operators <fts-operators>` and how |fts| :ref:`scores
   <scoring-ref>` documents in the results.

   *Duration: 15 Minutes*

   .. video:: https://youtu.be/U-hAo_TAi9c

.. collapsible::
   :heading: Video: Elevate Your Search with Fuzzy, Geospatial and Highlighting Hacks
   :sub_heading: Watch a video tutorial about advanced search topics.
   :expanded: false

   Follow along with this video to learn how to search fields in embedded
   documents using the :ref:`embeddedDocument <embedded-document-ref>` operator, how to
   perform fuzzy search using the :ref:`text <text-ref>` operator :ref:`fuzzy
   option <text-ref-fields>`, how to build search-as-you-type function
   using the :ref:`autocomplete <autocomplete-ref>` operator, how to run geospatial
   queries using the :ref:`geoWithin <geowithin-ref>` and :ref:`geoShape <geoshape-ref>`
   operators, how to retrieve similar or alternate results using the
   :ref:`moreLikeThis <more-like-this-ref>` operator, and how to display
   search terms in their original context using :ref:`highlighting
   <highlight-ref>`.

   *Duration: 12 Minutes*

   .. video:: https://youtu.be/Ibdb81WXOxE

.. toctree::
   :titlesonly:

   autocomplete </atlas-search/operators-collectors/autocomplete>
   compound </atlas-search/operators-collectors/compound>
   embedded-document </atlas-search/operators-collectors/embedded-document>
   equals </atlas-search/operators-collectors/equals>
   exists </atlas-search/operators-collectors/exists>
   facet </atlas-search/operators-collectors/facet>
   geoShape </atlas-search/operators-collectors/geoShape>
   geoWithin </atlas-search/operators-collectors/geoWithin>
   hasAncestor </atlas-search/operators-collectors/hasAncestor>
   hasRoot </atlas-search/operators-collectors/hasRoot>
   in </atlas-search/operators-collectors/in>
   knnBeta (Deprecated) </atlas-search/operators-collectors/knn-beta>
   morelikethis </atlas-search/operators-collectors/morelikethis>
   near </atlas-search/operators-collectors/near>
   phrase </atlas-search/operators-collectors/phrase>
   queryString </atlas-search/operators-collectors/queryString>
   range </atlas-search/operators-collectors/range>
   regex </atlas-search/operators-collectors/regex>
   span (Deprecated) </atlas-search/operators-collectors/span>
   text </atlas-search/operators-collectors/text>
   vectorSearch </atlas-search/operators-collectors/vectorSearch>
   wildcard </atlas-search/operators-collectors/wildcard>
